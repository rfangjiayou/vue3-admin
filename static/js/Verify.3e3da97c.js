(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Verify"],{2663:function(e,t,a){},"2cf1":function(e,t,a){"use strict";a("e573")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("1d80"),i=a("5899"),c="["+i+"]",l=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),r=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(l,"")),2&e&&(a=a.replace(s,"")),a}};e.exports={start:r(1),end:r(2),trim:r(3)}},7962:function(e,t,a){"use strict";a("a783")},"7f03":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),i=Object(n["eb"])("data-v-e8c3001a");Object(n["G"])("data-v-e8c3001a");var c={class:"verify-wrap"},l={class:"verify-wrap__inner"},s=Object(n["m"])("p",null,"调整拼图块尺寸(:puzzleScale, 倍数, 默认1)",-1),r=Object(n["m"])("p",null,"调整滑块尺寸(:sliderSize, px, 默认50)",-1),o=Object(n["m"])("h3",null,"基本",-1),u=Object(n["l"])("开始验证"),d=Object(n["m"])("h3",null,"自定义图片",-1),v=Object(n["l"])("开始验证");Object(n["E"])();var f=i((function(e,t,a,f,p,b){var h=Object(n["M"])("Tip"),m=Object(n["M"])("el-slider"),g=Object(n["M"])("el-button"),O=Object(n["M"])("Verify");return Object(n["D"])(),Object(n["i"])("div",c,[Object(n["m"])(h,{message:e.message},null,8,["message"]),Object(n["m"])("div",l,[s,Object(n["m"])(m,{class:"slider","tooltip-class":"slider-popover",modelValue:e.puzzleScale,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.puzzleScale=t}),min:.2,max:2,step:.1},null,8,["modelValue","min","step"]),r,Object(n["m"])(m,{class:"slider","tooltip-class":"slider-popover",modelValue:e.sliderSize,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.sliderSize=t}),min:30,max:80},null,8,["modelValue"]),o,Object(n["m"])(g,{onClick:f.getVerify,class:"btn",size:"small"},{default:i((function(){return[u]})),_:1},8,["onClick"]),d,Object(n["m"])(g,{onClick:f.getVerifyCustom,class:"btn",size:"small"},{default:i((function(){return[v]})),_:1},8,["onClick"])]),Object(n["m"])(O,{visible:e.visible,"onUpdate:visible":t[3]||(t[3]=function(t){return e.visible=t}),imgs:e.imgs,puzzleScale:e.puzzleScale,sliderSize:e.sliderSize},null,8,["visible","imgs","puzzleScale","sliderSize"])])})),p=a("5530"),b=(a("96cf"),a("1da1")),h=a("81d6"),m=(a("99af"),Object(n["eb"])("data-v-392c919f"));Object(n["G"])("data-v-392c919f");var g=Object(n["m"])("div",null,null,-1),O={class:"verify-box-ctrl"},j={class:"range-text"},w=Object(n["m"])("div",null,null,-1),S=Object(n["m"])("div",null,null,-1),y=Object(n["m"])("div",null,null,-1);Object(n["E"])();var M=m((function(e,t,a,i,c,l){var s=Object(n["M"])("IconSvg"),r=Object(n["N"])("loading");return Object(n["D"])(),Object(n["i"])("div",{class:["verify",a.visible&&"visible"],onMousedown:t[4]||(t[4]=function(){return i.onCloseMouseDown&&i.onCloseMouseDown.apply(i,arguments)})},[Object(n["m"])("div",{class:"verify-box",onMousedown:t[3]||(t[3]=Object(n["db"])((function(){}),["stop"]))},[Object(n["bb"])(Object(n["m"])("div",{class:"verify-box-body",style:"height: ".concat(a.canvasHeight,"px;width: ").concat(a.canvasWidth,"px")},[g,Object(n["m"])("canvas",{ref:"canvasMain",width:a.canvasWidth,height:a.canvasHeight,style:"width:".concat(a.canvasWidth,"px;height:").concat(a.canvasHeight,"px")},null,12,["width","height"]),Object(n["m"])("canvas",{ref:"canvasSuccess",class:["canvas-success",{show:e.isSuccess}],width:a.canvasWidth,height:a.canvasHeight,style:"width:".concat(a.canvasWidth,"px;height:").concat(a.canvasHeight,"px")},null,14,["width","height"]),Object(n["m"])("canvas",{width:i.puzzleBaseSize,class:"canvas-pic",height:a.canvasHeight,ref:"canvasPic",style:"width:".concat(i.puzzleBaseSize,"px;height:").concat(a.canvasHeight,"px;transform:translateX(").concat(i.styleWidth-i.sliderBaseSize-(i.puzzleBaseSize-i.sliderBaseSize)*((i.styleWidth-i.sliderBaseSize)/(a.canvasWidth-i.sliderBaseSize)),"px)")},null,12,["width","height"]),Object(n["m"])("div",{class:"reset-btn",onClick:t[1]||(t[1]=function(){return i.handleClick&&i.handleClick.apply(i,arguments)})},[Object(n["m"])(s,{iconName:"reset",class:"icon"})])],4),[[r,e.loading]]),Object(n["m"])("div",O,[Object(n["m"])("div",{class:"range-box",style:"height:".concat(i.sliderBaseSize,"px")},[Object(n["m"])("div",j,Object(n["Q"])(a.sliderText),1),Object(n["m"])("div",{class:"range-slider",ref:"rangeSlider",style:"width:".concat(i.styleWidth,"px")},[Object(n["m"])("div",{class:["range-btn",{isDown:e.mouseDown}],style:"width:".concat(i.sliderBaseSize,"px"),onMousedown:t[2]||(t[2]=function(e){return i.onRangeMouseDown(e)})},[w,S,y],38)],4)],4)])],32)],34)}));a("cb29"),a("c975"),a("a9e3");function z(e){if(Array.isArray(e))return e}a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0");function x(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,i=!1,c=void 0;try{for(var l,s=e[Symbol.iterator]();!(n=(l=s.next()).done);n=!0)if(a.push(l.value),t&&a.length===t)break}catch(r){i=!0,c=r}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw c}}return a}}var X=a("06c5");function C(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){return z(e)||x(e,t)||Object(X["a"])(e,t)||C()}var Y=a("ed08"),T={name:"Verify",props:{visible:{type:Boolean,default:!1},canvasWidth:{type:Number,default:310},canvasHeight:{type:Number,default:160},range:{type:Number,default:10},puzzleScale:{type:Number,default:1},sliderSize:{type:Number,default:40},sliderText:{type:String,default:"拖动滑块完成拼图"},imgs:{type:Array,default:function(){return[]}}},emits:["update:visible","success","fail"],setup:function(e,t){var a=t.emit,i=Object(n["o"])(),c=Object(n["S"])(e),l=c.visible,s=c.canvasWidth,r=c.puzzleScale,o=c.sliderSize,u=Object(n["H"])({canvasMain:null,canvasSuccess:null,canvasPic:null,rangeSlider:null,timer:null,loading:!1,withCanvas:!1,mouseDown:!1,startWidth:50,startX:0,newX:0,pinX:0,pinY:0,isSuccess:!1,isCanSlide:!0,imgIndex:-1}),d=Object(n["g"])((function(){var e=u.startWidth+u.newX-u.startX;return e<f.value?f.value:e>s.value?s.value:e})),v=Object(n["g"])((function(){return Math.round(52.5*Math.max(Math.min(r.value,2),.2)+6)})),f=Object(n["g"])((function(){return Math.max(Math.min(Math.round(o.value),Math.round(.5*s.value)),10)}));Object(n["Y"])((function(){return l}),(function(t){t.value&&V(u,a,e,f,v)}),{deep:!0});var b=W(u,a,e,i,d,f,v),h=b.onCloseMouseDown,m=b.onRangeMouseDown,g=b.onRangeMouseMove,O=b.onRangeMouseUp,j=function(){V(u,a,e,f,v)};return Object(n["A"])((function(){document.addEventListener("mousemove",g,!1),document.addEventListener("mouseup",O,!1)})),Object(n["x"])((function(){clearTimeout(u.timer),document.removeEventListener("mousemove",g,!1),document.removeEventListener("mouseup",O,!1)})),Object(p["a"])(Object(p["a"])({},Object(n["S"])(u)),{},{puzzleBaseSize:v,sliderBaseSize:f,styleWidth:d,onCloseMouseDown:h,onRangeMouseDown:m,handleClick:j})}};function N(e,t,a,i){e.isCanSlide=!1,e.loading=!0;var c=Object(n["S"])(a),l=c.imgs,s=c.puzzleScale,r=c.canvasWidth,o=c.canvasHeight,u=e.canvasMain,d=e.canvasSuccess,v=e.canvasPic,f=u.getContext("2d"),p=d.getContext("2d"),b=v.getContext("2d"),h=document.createElement("img");if(f.clearRect(0,0,r.value,o.value),b.clearRect(0,0,r.value,o.value),p.clearRect(0,0,r.value,o.value),e.pinX=Object(Y["d"])(i.value,r.value-i.value-20),e.pinY=Object(Y["d"])(20,o.value-i.value-20),h.crossOrigin="anonymous",h.onload=function(){var t=D(h,r,o),a=I(t,4),n=a[0],c=a[1],l=a[2],u=a[3];f.save(),E(f,e,s),f.closePath(),navigator.userAgent.indexOf("Firefox")>=0&&navigator.userAgent.indexOf("Windows")>=0||(f.shadowOffsetX=0,f.shadowOffsetY=0,f.shadowColor="#000",f.shadowBlur=3,f.fill()),f.clip(),f.save(),f.shadowOffsetX=0,f.shadowOffsetY=0,f.shadowColor="#000",f.shadowBlur=2,f.fill(),f.restore(),f.drawImage(h,n,c,l,u),p.drawImage(h,n,c,l,u),f.globalCompositeOperation="source-atop",E(f,e,s),f.arc(e.pinX+Math.ceil(i.value/2),e.pinY+Math.ceil(i.value/2),1.2*i.value,0,2*Math.PI,!0),f.closePath(),f.shadowColor="rgba(255, 255, 255, .8)",f.shadowOffsetX=-1,f.shadowOffsetY=-1,f.shadowBlur=Math.min(Math.ceil(8*s.value),12),f.fillStyle="#ffffaa",f.fill();var d=f.getImageData(e.pinX-3,e.pinY-20,e.pinX+i.value+5,e.pinY+i.value+5);b.clearRect(0,0,i.value+5,o.value),b.putImageData(d,0,e.pinY-20),f.restore(),f.clearRect(0,0,r.value,o.value),f.save(),E(f,e,s),f.globalAlpha=.8,f.fillStyle="#ffffff",f.fill(),f.restore(),f.save(),f.globalCompositeOperation="source-atop",E(f,e,s),f.arc(e.pinX+Math.ceil(i.value/2),e.pinY+Math.ceil(i.value/2),1.2*i.value,0,2*Math.PI,!0),f.shadowColor="#000",f.shadowOffsetX=2,f.shadowOffsetY=2,f.shadowBlur=16,f.fill(),f.restore(),f.save(),f.globalCompositeOperation="destination-over",f.drawImage(h,n,c,l,u),f.restore(),e.loading=!1,e.isCanSlide=!0},h.onerror=function(){e.withCanvas=!0,N()},!e.withCanvas&&l.value&&l.value.length){var m=Object(Y["d"])(0,l.value.length-1);m===e.imgIndex&&(m===e.imgs.value.length-1?m=0:m++),e.imgIndex=m,h.src=l.value[m]}else h.src=R(r,o)}function E(e,t,a){var n=Math.ceil(15*a.value);e.beginPath(),e.moveTo(t.pinX,t.pinY),e.lineTo(t.pinX+n,t.pinY),e.arcTo(t.pinX+n,t.pinY-n/2,t.pinX+n+n/2,t.pinY-n/2,n/2),e.arcTo(t.pinX+n+n,t.pinY-n/2,t.pinX+n+n,t.pinY,n/2),e.lineTo(t.pinX+3*n,t.pinY),e.lineTo(t.pinX+3*n,t.pinY+n),e.arcTo(t.pinX+3*n+n/2,t.pinY+n,t.pinX+3*n+n/2,t.pinY+n+n/2,n/2),e.arcTo(t.pinX+3*n+n/2,t.pinY+2*n,t.pinX+3*n,t.pinY+2*n,n/2),e.lineTo(t.pinX+3*n,t.pinY+3*n),e.lineTo(t.pinX,t.pinY+3*n),e.lineTo(t.pinX,t.pinY+2*n),e.arcTo(t.pinX+n/2,t.pinY+2*n,t.pinX+n/2,t.pinY+n+n/2,n/2),e.arcTo(t.pinX+n/2,t.pinY+n,t.pinX,t.pinY+n,n/2),e.lineTo(t.pinX,t.pinY)}function D(e,t,a){var n=e.width/e.height,i=t.value/a.value,c=0,l=0,s=0,r=0;return n>i?(r=a.value,s=n*r,l=0,c=(t.value-s)/2):(s=t.value,r=s/n,c=0,l=(a.value-r)/2),[c,l,s,r]}function R(e,t){var a=document.createElement("canvas"),n=a.getContext("2d");n.fillStyle="rgb(".concat(Object(Y["d"])(100,255),", ").concat(Object(Y["d"])(100,255),", ").concat(Object(Y["d"])(100,255),")"),n.fillRect(0,0,e.value,t.value);for(var i=0;i<10;i++)if(n.fillStyle="rgb(".concat(Object(Y["d"])(100,255),", ").concat(Object(Y["d"])(100,255),", ").concat(Object(Y["d"])(100,255),")"),n.strokeStyle="rgb(".concat(Object(Y["d"])(100,255),", ").concat(Object(Y["d"])(100,255),", ").concat(Object(Y["d"])(100,255),")"),Object(Y["d"])(0,2)>1)n.save(),n.rotate(Object(Y["d"])(-90,90)*Math.PI/180),n.fillRect(Object(Y["d"])(-20,a.width-20),Object(Y["d"])(-20,a.height-20),Object(Y["d"])(10,a.width/2+10),Object(Y["d"])(10,a.height/2+10)),n.restore();else{n.beginPath();var c=Object(Y["d"])(-Math.PI,Math.PI);n.arc(Object(Y["d"])(0,a.width),Object(Y["d"])(0,a.height),Object(Y["d"])(10,a.height/2+10),c,c+1.5*Math.PI),n.closePath(),n.fill()}return a.toDataURL("image/png")}function W(e,t,a,n,i,c,l){var s=function(){t("update:visible",!1)},r=function(t){e.isCanSlide&&(e.mouseDown=!0,e.startWidth=e.rangeSlider.clientWidth,e.newX=t.clientX,e.startX=t.clientX)},o=function(t){e.mouseDown&&(t.preventDefault(),e.newX=t.clientX)},u=function(){e.mouseDown&&(e.mouseDown=!1,A(e,t,a,n,i,c,l))};return{onCloseMouseDown:s,onRangeMouseDown:r,onRangeMouseMove:o,onRangeMouseUp:u}}function A(e,t,a,n,i,c,l){var s=a.canvasWidth,r=a.range,o=Math.abs(e.pinX-(i.value-c.value)+(l.value-c.value)*((i.value-c.value)/(s-c.value))-3);o<=r?(n.proxy.$baseMessage("success","验证成功！"),clearTimeout(e.timer),e.timer=setTimeout((function(){e.isCanSlide=!1,e.isSuccess=!0,t("success",o),t("update:visible",!1)}),800)):(n.proxy.$baseMessage("error","验证失败，请重新验证！"),clearTimeout(e.timer),e.timer=setTimeout((function(){e.isCanSlide=!1,t("fail",o),V(e,t,a,c,l)}),800))}function V(e,t,a,n,i){e.isCanSlide=!0,e.isSuccess=!1,e.startWidth=n.value,e.startX=0,e.newX=0,N(e,t,a,i)}a("fe6c");T.render=M,T.__scopeId="data-v-392c919f";var _=T,B=a("dde5"),P={components:{Tip:h["a"],Verify:_},setup:function(){var e=Object(n["H"])({message:"一款纯前端的滑动验证码，基本模式采用canvas随机作图，自定义模式采用接口返回的图片，当自定义图片加载失败时，强制使用canvas随机作图",visible:!1,imgs:[],puzzleScale:1,sliderSize:40}),t=function(){e.visible=!0},a=function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(B["c"])();case 2:a=t.sent,n=a.success,i=a.result,n&&(e.imgs=i.list,e.visible=!0);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(p["a"])(Object(p["a"])({},Object(n["S"])(e)),{},{getVerify:t,getVerifyCustom:a})}};a("2cf1");P.render=f,P.__scopeId="data-v-e8c3001a";t["default"]=P},"81d5":function(e,t,a){"use strict";var n=a("7b0b"),i=a("23cb"),c=a("50c4");e.exports=function(e){var t=n(this),a=c(t.length),l=arguments.length,s=i(l>1?arguments[1]:void 0,a),r=l>2?arguments[2]:void 0,o=void 0===r?a:i(r,a);while(o>s)t[s++]=e;return t}},"81d6":function(e,t,a){"use strict";var n=a("7a23"),i=Object(n["eb"])("data-v-78de5c20");Object(n["G"])("data-v-78de5c20");var c={class:"tip"};Object(n["E"])();var l=i((function(e,t,a,i,l,s){return Object(n["D"])(),Object(n["i"])("div",c,[Object(n["m"])("p",null,Object(n["Q"])(a.message),1)])})),s={props:{message:String},setup:function(e){}};a("7962");s.render=l,s.__scopeId="data-v-78de5c20";t["a"]=s},a783:function(e,t,a){},a9e3:function(e,t,a){"use strict";var n=a("83ab"),i=a("da84"),c=a("94ca"),l=a("6eeb"),s=a("5135"),r=a("c6b6"),o=a("7156"),u=a("c04e"),d=a("d039"),v=a("7c73"),f=a("241c").f,p=a("06cf").f,b=a("9bf2").f,h=a("58a8").trim,m="Number",g=i[m],O=g.prototype,j=r(v(O))==m,w=function(e){var t,a,n,i,c,l,s,r,o=u(e,!1);if("string"==typeof o&&o.length>2)if(o=h(o),t=o.charCodeAt(0),43===t||45===t){if(a=o.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(o.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+o}for(c=o.slice(2),l=c.length,s=0;s<l;s++)if(r=c.charCodeAt(s),r<48||r>i)return NaN;return parseInt(c,n)}return+o};if(c(m,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var S,y=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof y&&(j?d((function(){O.valueOf.call(a)})):r(a)!=m)?o(new g(w(t)),a,y):w(t)},M=n?f(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),z=0;M.length>z;z++)s(g,S=M[z])&&!s(y,S)&&b(y,S,p(g,S));y.prototype=O,O.constructor=y,l(i,m,y)}},cb29:function(e,t,a){var n=a("23e7"),i=a("81d5"),c=a("44d2");n({target:"Array",proto:!0},{fill:i}),c("fill")},e573:function(e,t,a){},fe6c:function(e,t,a){"use strict";a("2663")}}]);