(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Editor"],{"2ff0":function(e,t,o){},7962:function(e,t,o){"use strict";o("a783")},"81d6":function(e,t,o){"use strict";var l=o("7a23"),n=Object(l["eb"])("data-v-78de5c20");Object(l["G"])("data-v-78de5c20");var a={class:"tip"};Object(l["E"])();var r=n((function(e,t,o,n,r,u){return Object(l["D"])(),Object(l["i"])("div",a,[Object(l["m"])("p",null,Object(l["Q"])(o.message),1)])})),u={props:{message:String},setup:function(e){}};o("7962");u.render=r,u.__scopeId="data-v-78de5c20";t["a"]=u},8841:function(e,t,o){},a783:function(e,t,o){},ca27:function(e,t,o){},cb96:function(e,t,o){"use strict";o("8841")},ce95:function(e,t,o){"use strict";o("2ff0")},d27c:function(e,t,o){"use strict";o("ca27")},f313:function(e,t,o){"use strict";o.r(t);var l=o("7a23"),n=Object(l["eb"])("data-v-46b0eb9c");Object(l["G"])("data-v-46b0eb9c");var a={class:"editor-wrap"},r={class:"editor"},u=Object(l["l"])("删除表单校验"),i=Object(l["l"])("添加表单校验");Object(l["E"])();var c=n((function(e,t,o,c,d,s){var f=Object(l["M"])("Tip"),b=Object(l["M"])("el-radio"),m=Object(l["M"])("el-radio-group"),p=Object(l["M"])("Editor"),v=Object(l["M"])("el-form-item"),g=Object(l["M"])("el-form");return Object(l["D"])(),Object(l["i"])("div",a,[Object(l["m"])(f,{message:c.message},null,8,["message"]),Object(l["m"])("section",r,[Object(l["m"])(m,{modelValue:e.radio,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.radio=t}),onChange:c.radioChange},{default:n((function(){return[Object(l["m"])(b,{label:!1},{default:n((function(){return[u]})),_:1}),Object(l["m"])(b,{label:!0},{default:n((function(){return[i]})),_:1})]})),_:1},8,["modelValue","onChange"]),Object(l["m"])(g,{ref:"editorForm",model:e.form,rules:e.formRules,class:"form"},{default:n((function(){return[Object(l["m"])(v,{prop:"editor"},{default:n((function(){return[Object(l["m"])(p,{ref:"editor",class:"form-editor",modelValue:e.form.editor,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.editor=t}),formProp:"editor",placeholder:"请输入内容",imageUploadPath:"https://jsonplaceholder.typicode.com/posts/",onBlur:c.onBlur,onOverlength:c.vaildEditor},null,8,["modelValue","onBlur","onOverlength"])]})),_:1})]})),_:1},8,["model","rules"])])])})),d=o("5530"),s=o("81d6"),f=Object(l["eb"])("data-v-605ae635"),b=f((function(e,t,o,n,a,r){var u=Object(l["M"])("el-upload"),i=Object(l["M"])("quill-editor");return Object(l["D"])(),Object(l["i"])("div",{class:"q-editor",id:"q-editor-".concat(o.uploadBtnId)},[Object(l["m"])(u,{class:["avatar-upload-".concat(o.uploadBtnId),"upload-btn"],name:o.uploadFileName,action:o.imageUploadPath,"show-file-list":!1,"on-success":n.handleSuccess,"on-error":n.uploadError},null,8,["class","name","action","on-success","on-error"]),Object(l["m"])(i,{modelValue:e.localValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.localValue=t}),ref:"editor",options:e.editorOption,onChange:n.handleChange,onBlur:n.onEditorBlur,onFocus:n.onEditorFocus,onReady:n.onEditorReady},null,8,["modelValue","options","onChange","onBlur","onFocus","onReady"])],8,["id"])})),m=(o("99af"),o("4160"),o("a630"),o("c975"),o("a9e3"),o("3ca3"),o("159b"),Object(l["eb"])("data-v-81a3273c")),p=m((function(e,t,o,n,a,r){return Object(l["D"])(),Object(l["i"])("div",{class:["quill-editor",e.uid&&"quill-editor-".concat(e.uid)],ref:"editor"},null,2)})),v=o("9339"),g=o.n(v),O=(o("a753"),o("8096"),o("14e1"),{props:{options:{type:Object,required:!1,default:function(){return{}}},modelValue:String,disabled:{type:Boolean,default:!1}},emit:["ready","change","input","blur","focus","update:modelValue"],setup:function(e,t){var o=t.emit,n=Object(l["o"])(),a=Object(l["H"])({uid:n.uid,targetClass:Object(l["g"])((function(){return".quill-editor-".concat(a.uid)})),localValue:""}),r=Object(l["I"])(null);return Object(l["Y"])((function(){return e.modelValue}),(function(e){var t=r.value;t&&(e&&e!==a.localValue?(a.localValue=e,t.setText?t.pasteHTML(e):t.__quill.pasteHTML(e)):e||(t.setText?t.setText(""):t.__quill.setText("")))})),Object(l["A"])((function(){j(a,r,e,o)})),Object(d["a"])(Object(d["a"])({},Object(l["S"])(a)),{},{editor:r})}});function j(e,t,o,n){var a=Object(l["S"])(o),r=a.options,u=a.modelValue,i=a.disabled,c=document.querySelector(e.targetClass);t.value=new g.a(c,r.value);var d=t.value;u.value&&d.pasteHTML(u.value),d.on("selection-change",(function(e){n(e?"focus":"blur",d)})),d.on("text-change",(function(){i.value&&d.enable(!1);var t="";d.root.children.forEach((function(e,o){o===d.root.children.length-1?t+=e.innerHTML:t+=e.innerHTML+"</br>"})),e.localValue=t;var o=d.getText();"<p><br></p>"!==t&&"<br>"!==t||(t=""),n("update:modelValue",t),n("change",{html:t,text:o,quill:d})})),n("ready",d)}o("d27c");O.render=p,O.__scopeId="data-v-81a3273c";var h=O,q={name:"Editor",props:{uploadBtnId:{type:String,default:"u01"},modelValue:String,formProp:{type:String,default:""},pasteimage:{type:Boolean,default:!0},imageUploadPath:{type:String,default:""},uploadFileName:{type:String,default:"file"},minLength:{type:Number,default:0},maxLength:{type:Number,default:500},toolbar:{type:Array,default:function(){return[["bold","italic","underline","strike",{color:[]},{background:[]},{align:[]},"image","clean"]]}},placeholder:{type:String,default:"请输入"},imageSize:{type:Number,default:3}},components:{QuillEditor:h},emits:["change","blur","overlength","update:modelValue"],setup:function(e,t){var o=t.emit,n=Object(l["o"])(),a=Object(l["S"])(e),r=a.placeholder,u=a.toolbar,i=a.uploadBtnId,c=a.modelValue,s=Object(l["I"])(null),f=Object(l["H"])({localValue:"",editorOption:{placeholder:r,theme:"snow",modules:{toolbar:{container:u,handlers:{image:function(e){if(e){var t="#q-editor-".concat(i.value," .avatar-upload-").concat(i.value),o=document.querySelector(t);o&&o.children&&o.children[0]&&o.children[0].click()}else this.quill.format("image",!1)}}}}},titleConfig:{"ql-bold":"加粗","ql-color":"颜色","ql-font":"字体","ql-code":"插入代码","ql-italic":"斜体","ql-link":"添加链接","ql-background":"背景颜色","ql-size":"字体大小","ql-strike":"删除线","ql-script":"上标/下标","ql-underline":"下划线","ql-blockquote":"引用","ql-header":"标题","ql-indent":"缩进","ql-list":"列表","ql-align":"文本对齐","ql-direction":"文本方向","ql-code-block":"代码块","ql-formula":"公式","ql-image":"图片","ql-video":"视频","ql-clean":"清除字体样式"}});Object(l["Y"])((function(){return c}),(function(e){f.localValue=e.value}),{deep:!0}),Object(l["Y"])((function(){return f.localValue}),(function(e){o("update:modelValue",e)}),{deep:!0});var b=S(f,o,e),m=b.handleChange,p=b.onEditorBlur,v=b.onEditorFocus,g=b.onEditorReady,O=k(n,s),j=O.handleSuccess,h=O.uploadError;return Object(l["A"])((function(){y(f,s,e)})),Object(l["x"])((function(){})),Object(d["a"])(Object(d["a"])({},Object(l["S"])(f)),{},{editor:s,handleChange:m,onEditorBlur:p,onEditorFocus:v,onEditorReady:g,handleSuccess:j,uploadError:h})}};function y(e,t){E(e)}function E(e){var t=document.querySelectorAll(".ql-toolbar");t.forEach((function(t){var o=t.querySelectorAll("button"),l=t.querySelectorAll(".ql-formats .ql-picker");o.forEach((function(t){"ql-script"===t.className?"sub"===t.value?t.title="下标":t.title="上标":"ql-indent"===t.className?"+1"===t.value?t.title="向右缩进":t.title="向左缩进":t.title=e.titleConfig[t.classList[0]]})),l.forEach((function(t){if(Array.from(t.classList).indexOf("ql-color")>-1||Array.from(t.classList).indexOf("ql-background")>-1||Array.from(t.classList).indexOf("ql-align")>-1){var o=t.querySelector(".ql-picker-options");o.title=""}t.title=e.titleConfig[t.classList[0]]}))}))}function V(e,t,o,l,n){var a=e;return a&&a.length-1>t.value?(l("overlength",!0,n.value,!0),!0):a&&a.length-1<o.value?(l("overlength",!0,n.value,!1),!0):(l("overlength",!1,n.value),!1)}function S(e,t,o){var n=Object(l["S"])(o),a=n.maxLength,r=n.minLength,u=n.formProp,i=function(){},c=function(){for(var e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];var n=o&&o[0]&&o[0],i=n.getText();t("blur",u),V(i,a,r,t,u)},d=function(){},s=function(){};return{handleChange:i,onEditorBlur:c,onEditorFocus:d,onEditorReady:s}}function k(e,t){var o=function(o){var l=o.code,n=o.result,a=o.msg;if(200===l){var r=t.value.editor,u=r.getSelection();u&&(r.insertEmbed(u.index,"image",n.img_url),r.setSelection(u.index+1))}else e.proxy.$baseMessage("error",a||"图片上传失败！")},l=function(t,o){t&&"fail"===o.status&&e.proxy.$baseMessage("error",t.message||"图片上传失败！")};return{handleSuccess:o,uploadError:l}}o("cb96");q.render=b,q.__scopeId="data-v-605ae635";var x=q,_=o("ed08"),w={components:{Tip:s["a"],Editor:x},setup:function(){var e="富文本编辑器采用quill，用vue3做了一次简单的封装，仅支持部分内容，支持表单校验，相关链接：https://kang-bing-kui.gitbook.io/quill/wen-dang-document/quickstart",t=Object(l["H"])({radio:!1,form:{editor:""},formRules:{editor:[]}}),o=Object(l["I"])(null),n=Object(l["I"])(null),a=Object(l["I"])(null),r=Object(l["g"])((function(){return{editor:[function(){return t.formRules.editor.unshift({validator:function(e,t,o){return o(new Error("你输入的文字超过500个字数限制，请修改后重新提交"))}}),function(){return t.formRules.editor.shift()}}]}})),u=function(e){e?t.formRules.editor.push({required:!0,message:"此项不能为空",trigger:"blur",whitespace:!0}):t.formRules.editor=[],Object(l["u"])((function(){t.form.editor="",n.value.clearValidate()}))},i=function(){n.value.validateField("editor")},c=function(e,t,o){if(e)switch(t){case"editor":o&&a.value.display(t,r.value);break;default:break}else n.value.validate(t)};return Object(l["A"])((function(){a.value||Object(l["u"])((function(){a.value=new _["a"](n.value)}))})),Object(d["a"])(Object(d["a"])({message:e},Object(l["S"])(t)),{},{editor:o,editorForm:n,onBlur:i,vaildEditor:c,radioChange:u})}};o("ce95");w.render=c,w.__scopeId="data-v-46b0eb9c";t["default"]=w}}]);